# .github/workflows/dependencies.yml

name: Dependency Management

on:
  schedule:
    - cron: '0 10 * * 1'  # Every Monday at 10 AM
  workflow_dispatch:

jobs:
  check-dependencies:
    name: Check for outdated dependencies
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci

    - name: Check for outdated packages
      run: npm outdated --json > outdated.json

    - name: Create issue if outdated packages found
      uses: peter-evans/create-issue-from-file@v4
      if: always()
      with:
        title: 'Dependency Update Required'
        content-filepath: './outdated.json'
        labels: 'dependencies, automated'